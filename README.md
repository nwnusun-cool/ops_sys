# OpenStackè¿ç»´ç®¡ç†å¹³å° v2.0

ä¸€ä¸ªåŸºäºFlaskçš„å¤šOpenStacké›†ç¾¤ç»Ÿä¸€ç®¡ç†å¹³å°ï¼Œæä¾›Webç•Œé¢è¿›è¡Œå®ä¾‹ã€å·ã€ç½‘ç»œã€å¿«ç…§ç­‰èµ„æºçš„é›†ä¸­ç®¡ç†ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸŒ **å¤šé›†ç¾¤ç®¡ç†** - ç»Ÿä¸€ç®¡ç†å¤šä¸ªOpenStackç¯å¢ƒ
- ğŸ‘¥ **ç”¨æˆ·æƒé™** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(RBAC)
- ğŸ” **å®‰å…¨åŠ å›º** - å‡­æ®åŠ å¯†å­˜å‚¨ï¼Œæ“ä½œå®¡è®¡
- ğŸ“Š **èµ„æºç›‘æ§** - å®æ—¶çŠ¶æ€ç›‘æ§å’Œèµ„æºç»Ÿè®¡
- ğŸ”„ **æ‰¹é‡æ“ä½œ** - æ”¯æŒæ‰¹é‡æ“ä½œå’Œå¯¼å‡ºåŠŸèƒ½
- ğŸ“± **å“åº”å¼UI** - ç°ä»£åŒ–Webç•Œé¢ï¼Œæ”¯æŒç§»åŠ¨ç«¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- MySQL 8.0+ (æˆ–MariaDB 10.3+)
- Redis (å¯é€‰ï¼Œç”¨äºç¼“å­˜)

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd ops_sys
```

### 2. åç«¯è®¾ç½®

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\\Scripts\\activate
# Linux/Mac
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 3. é…ç½®ç¯å¢ƒ

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim .env
```

ä¸»è¦é…ç½®é¡¹ï¼š
```env
# æ•°æ®åº“é…ç½®
DATABASE_URL=mysql+pymysql://username:password@localhost/ops_sys

# åº”ç”¨é…ç½®
SECRET_KEY=your-very-secret-key
FLASK_ENV=development

# OpenStacké…ç½®æ–‡ä»¶
OPENSTACK_CONFIG_FILE=openstack_config.json
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆå§‹åŒ–æ•°æ®åº“
python migrations/init_db.py

# æˆ–è€…ä½¿ç”¨ç®¡ç†è„šæœ¬
python manage.py init-db
```

### 5. å¯åŠ¨åº”ç”¨

```bash
# å¼€å‘ç¯å¢ƒ
python start_dev.py

# æˆ–ç”Ÿäº§ç¯å¢ƒ
python run.py
```

è®¿é—® http://localhost:5001

### 6. é»˜è®¤è´¦æˆ·

- **ç®¡ç†å‘˜**: admin / admin123
- **æ“ä½œå‘˜**: operator / operator123  
- **æŸ¥çœ‹è€…**: viewer / viewer123

## ğŸ“ é¡¹ç›®ç»“æ„

```
ops_sys/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ api/               # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ admin/             # ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ migrations/            # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ config.py              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”‚   â””â”€â”€ run.py                 # å¯åŠ¨æ–‡ä»¶
â”œâ”€â”€ frontend/                   # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ static/                # é™æ€èµ„æº
â”‚   â””â”€â”€ templates/             # é¡µé¢æ¨¡æ¿
â”œâ”€â”€ docs/                       # æ–‡æ¡£
â”œâ”€â”€ åŠŸèƒ½éœ€æ±‚æ–‡æ¡£.md             # åŠŸèƒ½éœ€æ±‚
â””â”€â”€ å¼€å‘å®æ–½è®¡åˆ’.md             # å¼€å‘è®¡åˆ’
```

## ğŸ› ï¸ ç®¡ç†å‘½ä»¤

ä½¿ç”¨ç®¡ç†è„šæœ¬è¿›è¡Œæ—¥å¸¸ç®¡ç†ï¼š

```bash
# ç”¨æˆ·ç®¡ç†
python manage.py create-user        # åˆ›å»ºç”¨æˆ·
python manage.py list-users         # åˆ—å‡ºç”¨æˆ·
python manage.py delete-user        # åˆ é™¤ç”¨æˆ·

# é›†ç¾¤ç®¡ç†
python manage.py add-cluster        # æ·»åŠ é›†ç¾¤
python manage.py list-clusters      # åˆ—å‡ºé›†ç¾¤
python manage.py test-cluster       # æµ‹è¯•è¿æ¥

# æ•°æ®åº“ç®¡ç†
python manage.py init-db            # åˆå§‹åŒ–æ•°æ®åº“
python manage.py clear-logs         # æ¸…é™¤æ—¥å¿—
```

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç ç»“æ„

- **æ¨¡å‹å±‚** (`app/models/`): æ•°æ®åº“æ¨¡å‹å®šä¹‰
- **æœåŠ¡å±‚** (`app/services/`): ä¸šåŠ¡é€»è¾‘å®ç°  
- **APIå±‚** (`app/api/`): REST APIæ¥å£
- **è®¤è¯å±‚** (`app/auth/`): ç”¨æˆ·è®¤è¯å’Œæƒé™
- **å·¥å…·å±‚** (`app/utils/`): é€šç”¨å·¥å…·å‡½æ•°

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `models/` ä¸­å®šä¹‰æ•°æ®æ¨¡å‹
2. åœ¨ `services/` ä¸­å®ç°ä¸šåŠ¡é€»è¾‘
3. åœ¨ `api/` ä¸­æ·»åŠ APIæ¥å£
4. åœ¨ `templates/` ä¸­åˆ›å»ºé¡µé¢æ¨¡æ¿
5. æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹

### æƒé™æ§åˆ¶

ä½¿ç”¨è£…é¥°å™¨è¿›è¡Œæƒé™æ§åˆ¶ï¼š

```python
from app.auth.decorators import role_required

@role_required('admin')
def admin_only_function():
    pass

@role_required('operator')  
def operator_function():
    pass
```

## ğŸ“Š åŠŸèƒ½æ¨¡å—

- âœ… **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·æ³¨å†Œã€è®¤è¯ã€æƒé™æ§åˆ¶
- âœ… **é›†ç¾¤ç®¡ç†** - OpenStackç¯å¢ƒé…ç½®å’Œè¿æ¥ç®¡ç†
- âœ… **å®ä¾‹ç®¡ç†** - è™šæ‹Ÿæœºå®ä¾‹çš„åˆ›å»ºã€æ“ä½œã€ç›‘æ§
- âœ… **å·ç®¡ç†** - å­˜å‚¨å·çš„ç®¡ç†å’Œå¿«ç…§åŠŸèƒ½
- ğŸš§ **ç½‘ç»œç®¡ç†** - ç½‘ç»œã€å­ç½‘ã€å®‰å…¨ç»„ç®¡ç†
- ğŸš§ **å¿«ç…§ç®¡ç†** - å®ä¾‹å’Œå·å¿«ç…§ç®¡ç†
- ğŸš§ **SSHç®¡ç†** - æœåŠ¡å™¨è¿æ¥å’Œåœ¨çº¿ç»ˆç«¯
- ğŸš§ **ç›‘æ§ä»ªè¡¨ç›˜** - èµ„æºç›‘æ§å’Œç»Ÿè®¡å›¾è¡¨

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **å‡­æ®åŠ å¯†**: OpenStackå‡­æ®ä½¿ç”¨å¯¹ç§°åŠ å¯†å­˜å‚¨
- **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„å¤šçº§æƒé™ç®¡ç†
- **æ“ä½œå®¡è®¡**: å®Œæ•´çš„æ“ä½œæ—¥å¿—è®°å½•
- **ä¼šè¯ç®¡ç†**: å®‰å…¨çš„ç”¨æˆ·ä¼šè¯å’Œè¶…æ—¶æ§åˆ¶
- **è¾“å…¥éªŒè¯**: ä¸¥æ ¼çš„ç”¨æˆ·è¾“å…¥éªŒè¯å’Œæ¸…ç†

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **æ•°æ®ç¼“å­˜**: Redisç¼“å­˜OpenStack APIå“åº”
- **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–
- **åˆ†é¡µåŠ è½½**: å¤§æ•°æ®é›†åˆ†é¡µæ˜¾ç¤º
- **å¼‚æ­¥æ“ä½œ**: é•¿æ—¶é—´æ“ä½œå¼‚æ­¥å¤„ç†

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
   - ç¡®è®¤æ•°æ®åº“é…ç½®æ­£ç¡®

2. **OpenStackè¿æ¥å¤±è´¥**
   - éªŒè¯é›†ç¾¤é…ç½®ä¿¡æ¯
   - æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™

3. **æƒé™é”™è¯¯**
   - ç¡®è®¤ç”¨æˆ·è§’è‰²è®¾ç½®
   - æ£€æŸ¥æƒé™è£…é¥°å™¨é…ç½®

### æ—¥å¿—æŸ¥çœ‹

```bash
# åº”ç”¨æ—¥å¿—
tail -f logs/ops_sys.log

# å¼€å‘æ¨¡å¼é”™è¯¯
# æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ“ æ”¯æŒ

- ğŸ“§ é‚®ç®±: support@example.com
- ğŸ“ æ–‡æ¡£: [åœ¨çº¿æ–‡æ¡£](https://docs.example.com)
- ğŸ› é—®é¢˜åé¦ˆ: [Issues](https://github.com/your-repo/issues)

---

ğŸ‰ æ„Ÿè°¢ä½¿ç”¨OpenStackè¿ç»´ç®¡ç†å¹³å°ï¼